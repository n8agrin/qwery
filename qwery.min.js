/*!
  * qwery.js - copyright @dedfat
  * original inspiration: http://simonwillison.net/2003/Mar/25/getElementsBySelector/
  * https://github.com/polvero/qwery
  * Follow our software http://twitter.com/dedfat
  * MIT License
  */

!function(a,b){function h(a,d){if(!b.getElementsByTagName)return[];d=d||document;if(b.querySelectorAll)return c(d.querySelectorAll(a),0);var e=[],h=[],i=a.split(",");for(var j=0,k=i.length;j<k;j++)h.push(g(i[j],d));for(var l=0,m=h.length;l<m;l++){var n=h[l];if(d!==document){n=[];for(var o=0,p=h[l].length;o<p;o++)f(h[l][o],d)&&n.push(h[l][o])}e=e.concat(n)}return e}function g(a,c){var f=a.split(" "),g,h,i,j,k,l,m,n,o,p,q,r,s=[b];for(j=0,m=f.length;j<m;j++){token=f[j].replace(/^\s+|\s+$/g,"");if(token.indexOf("#")>-1){g=token.split("#"),h=g[0];var t=b.getElementById(g[1]);if(h&&t.nodeName.toLowerCase()!=h)return[];s=[t];continue}if(token.indexOf(".")>-1){g=token.split("."),h=g[p=0],h=h||"*",o=[];for(i=0,n=s.length;i<n;i++){q=h=="*"?d(s[i]):s[i].getElementsByTagName(h);for(k=0,l=q.length;k<l;k++)o[p++]=q[k]}s=[],r=0;for(l=0,n=o.length;l<n;l++)o[l].className&&o[l].className.match(new RegExp("(?:^|\\s+)"+g[1]+"(?:\\s+|$)"))&&(s[r++]=o[l]);continue}if(token.match(/^(\w*)\[(\w+)([=~\|\^\$\*]?)=?"?([^\]"]*)"?\]$/)){h=RegExp.$1;var u=RegExp.$2,v=RegExp.$3,w=RegExp.$4;h||(h="*"),o=[],p=0;for(i=0;i<s.length;i++){h=="*"?q=d(s[i]):q=s[i].getElementsByTagName(h);for(k=0;k<q.length;k++)o[p++]=q[k]}s=[],r=0;var x=e[v]||e[""];for(l=0;l<o.length;l++)x(o[l],u,w)&&(s[r++]=o[l]);continue}h=token,o=[],p=0;for(i=0;i<s.length;i++){q=s[i].getElementsByTagName(h);for(k=0;k<q.length;k++)o[p++]=q[k]}s=o}return s}function f(a,b){if(!b||!a)return!1;if(b.contains&&a.nodeType)return b.contains(a);if(b.compareDocumentPosition&&a.nodeType)return!!(b.compareDocumentPosition(a)&16);if(a.nodeType)return!1;return!1}function d(a){return a.all?a.all:a.getElementsByTagName("*")}function c(a){return Array.prototype.slice.call(a,0)}var e={"=":function(a,b,c){return a.getAttribute(b)==c},"~":function(a,b,c){return a.getAttribute(b).match(new RegExp("\\b"+c+"\\b"))},"|":function(a,b,c){return a.getAttribute(b).match(new RegExp("^"+c+"-?"))},"^":function(a,b,c){return a.getAttribute(b).indexOf(c)===0},$:function(a,b,c){return a.getAttribute(b).lastIndexOf(c)==a.getAttribute(b).length-c.length},"*":function(a,b,c){return a.getAttribute(b).indexOf(c)>-1},"":function(a,b){return a.getAttribute(b)}},i=a.qwery;h.noConflict=function(){a.qwery=i;return this},a.qwery=h}(this,document)